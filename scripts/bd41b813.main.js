console.log("'Allo 'Allo!");var diameter=960,tree=d3.layout.tree().size([360,diameter/2-120]).separation(function(a,b){return(a.parent==b.parent?1:2)/a.depth}),diagonal=d3.svg.diagonal.radial().projection(function(a){return[a.y,a.x/180*Math.PI]}),svg=d3.select("body").append("svg").attr("width",diameter).attr("height",diameter-150).append("g").attr("transform","translate("+diameter/2+","+diameter/2+")");
d3.json("./json/flare.json",function(a,b){var c=tree.nodes(b),d=tree.links(c),e=(svg.selectAll(".link").data(d).enter().append("path").attr("class","link").attr("d",diagonal),svg.selectAll(".node").data(c).enter().append("g").attr("class","node").attr("transform",function(a){return"rotate("+(a.x-90)+")translate("+a.y+")"}));e.append("circle").attr("r",4.5),e.append("text").attr("dy",".31em").attr("text-anchor",function(a){return a.x<180?"start":"end"}).attr("transform",function(a){return a.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(a){return a.name})}),d3.select(self.frameElement).style("height",diameter-150+"px");
